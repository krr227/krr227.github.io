<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Entertainment Interactions Team</title>
<meta name="description" content="Entertainment Interactions Team - retro 90s studio site with news and bulletin board (single-file demo)."/>

<style>
/* =====================
   BASE THEME / COLORS
   ===================== */
:root{
  --bg:#0b1b2b;
  --panel:#c9c9c9;
  --panel2:#bdbdbd;
  --ink:#111;
  --hl:#ffffff;
  --sh:#6c6c6c;
  --accent:#0b5bd3;
  --accent2:#0e7b45;
  --warn:#b50f2a;
  --mono: ui-monospace,"Courier New",Courier,monospace;
  --sans: system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
}

html,body{height:100%;}
body{
  margin:0;
  font-family:var(--mono);
  background:linear-gradient(180deg,#081523,#050d16);
  color:var(--ink);
}

/* =====================
   GENERIC UI
   ===================== */
.hidden{display:none!important;}
.wrap{max-width:1050px;margin:22px auto;padding:14px;}
.window{
  background:var(--panel);
  border:2px solid var(--hl);
  box-shadow:inset -2px -2px 0 var(--sh), inset 2px 2px 0 var(--hl);
}
.titlebar{
  display:flex;
  justify-content:space-between;
  background:linear-gradient(90deg,#0b3a8f,#1b6ad4);
  color:#fff;
  padding:6px 8px;
  font-weight:700;
}
.content{padding:12px;background:#d0d0d0;}
.panel{
  background:#d7d7d7;
  border:2px solid var(--hl);
  box-shadow:inset -2px -2px 0 var(--sh), inset 2px 2px 0 var(--hl);
  padding:10px;
  margin-bottom:12px;
}
.h1{font-size:18px;font-weight:900;margin:0 0 6px;}
.sub{font-family:var(--sans);font-size:13px;color:#1f2c3a;}
label{font-size:12px;display:block;margin:8px 0 4px;}
input,textarea,select{
  width:100%;
  box-sizing:border-box;
  padding:7px 8px;
  font-family:var(--mono);
}
textarea{resize:vertical;min-height:90px;}
.btn{
  padding:7px 10px;
  background:var(--panel2);
  border:2px solid var(--hl);
  box-shadow:inset -2px -2px 0 var(--sh), inset 2px 2px 0 var(--hl);
  cursor:pointer;
  font-weight:700;
}
.btn.primary{background:#dfe9ff;}
.btn.good{background:#ddf7e9;}
.btn.danger{background:#ffe1e6;}
.list{display:flex;flex-direction:column;gap:10px;}
.card{
  background:#efefef;
  border:2px solid var(--hl);
  box-shadow:inset -2px -2px 0 var(--sh), inset 2px 2px 0 var(--hl);
  padding:10px;
}
.meta{font-family:var(--sans);font-size:12px;color:#23384a;display:flex;gap:8px;flex-wrap:wrap;}
.body{font-family:var(--sans);font-size:13px;white-space:pre-wrap;}
.img{max-width:100%;border:2px solid #333;margin-top:6px;}
video{max-width:100%;border:2px solid #333;margin-top:6px}

/* =====================
   TABS
   ===================== */
.tabs{display:flex;gap:6px;margin-bottom:10px;}
.tab{
  padding:6px 10px;
  background:#e6e6e6;
  border:2px solid var(--hl);
  font-weight:900;
  cursor:pointer;
}
.tab.active{background:#fff;}
</style>
</head>

<body>
<div class="wrap">
  <div class="window">
    <div class="titlebar">
      <div>Entertainment Interactions Team</div>
      <div>Local Demo</div>
    </div>

    <div class="content">
      <div class="tabs panel">
        <div class="tab active" data-tab="news">News</div>
        <div class="tab" data-tab="board">Bulletin Board</div>
      </div>

      <!-- =====================
           NEWS
           ===================== -->
      <section id="tab_news" class="panel">
        <div class="h1">Post News</div>
        <label>Title</label>
        <input id="newsTitle" type="text" maxlength="80"/>
        <label>Body</label>
        <textarea id="newsBody"></textarea>

        <label>Images (up to 10)</label>
        <input id="newsImages" type="file" accept="image/*" multiple/>

        <label>Videos (mp4 / gif, up to 3)</label>
        <input id="newsVideos" type="file" accept="video/mp4,image/gif" multiple/>

        <button class="btn good" id="postNews">Publish</button>
      </section>

      <div id="newsList" class="list"></div>

      <!-- =====================
           BOARD
           ===================== -->
      <section id="tab_board" class="panel hidden">
        <div class="h1">Create Topic</div>
        <label>Title</label>
        <input id="topicTitle" type="text" maxlength="80"/>
        <label>Body</label>
        <textarea id="topicBody"></textarea>

        <label>Images (up to 10)</label>
        <input id="topicImages" type="file" accept="image/*" multiple/>

        <label>Videos (mp4 / gif, up to 3)</label>
        <input id="topicVideos" type="file" accept="video/mp4,image/gif" multiple/>

        <button class="btn primary" id="postTopic">Post Topic</button>
      </section>

      <div id="topicList" class="list"></div>
    </div>
  </div>
</div>

<script>
/* =====================
   CONFIGURATION
   ===================== */
const STORAGE_KEY = "EIT_DB_ATTACHMENTS_V1";
const MAX_IMAGES = 10;
const MAX_VIDEOS = 3;
const MAX_TOTAL_BYTES = 1024 * 1024 * 1024; // 1GB

/* =====================
   STATE
   ===================== */
let db = JSON.parse(localStorage.getItem(STORAGE_KEY) || '{"news":[],"topics":[]}');

/* =====================
   UTILITIES
   ===================== */
function saveDB(){
  localStorage.setItem(STORAGE_KEY, JSON.stringify(db));
}

function fileToDataURL(file){
  return new Promise((res,rej)=>{
    const r = new FileReader();
    r.onload=()=>res(r.result);
    r.onerror=()=>rej();
    r.readAsDataURL(file);
  });
}

async function collectAttachments(imgInput, vidInput){
  const images = Array.from(imgInput.files || []);
  const videos = Array.from(vidInput.files || []);

  if(images.length > MAX_IMAGES)
    throw new Error("Too many images.");

  if(videos.length > MAX_VIDEOS)
    throw new Error("Too many videos.");

  let totalSize = 0;
  [...images,...videos].forEach(f=>totalSize+=f.size);
  if(totalSize > MAX_TOTAL_BYTES)
    throw new Error("Total attachment size exceeds 1GB.");

  const outImages = [];
  for(const img of images){
    outImages.push({
      name: img.name,
      type: img.type,
      size: img.size,
      data: await fileToDataURL(img)
    });
  }

  const outVideos = [];
  for(const vid of videos){
    outVideos.push({
      name: vid.name,
      type: vid.type,
      size: vid.size,
      data: await fileToDataURL(vid)
    });
  }

  return {images:outImages,videos:outVideos};
}

/* =====================
   RENDERING
   ===================== */
function renderNews(){
  const box = document.getElementById("newsList");
  box.innerHTML = "";
  db.news.forEach(n=>{
    const c = document.createElement("div");
    c.className="card";
    c.innerHTML = `<h3>${n.title}</h3><div class="body">${n.body}</div>`;
    n.attachments.images.forEach(i=>{
      const img=document.createElement("img");
      img.src=i.data; img.className="img";
      c.appendChild(img);
    });
    n.attachments.videos.forEach(v=>{
      const vid=document.createElement("video");
      vid.src=v.data; vid.controls=true;
      c.appendChild(vid);
    });
    box.appendChild(c);
  });
}

function renderTopics(){
  const box = document.getElementById("topicList");
  box.innerHTML="";
  db.topics.forEach(t=>{
    const c=document.createElement("div");
    c.className="card";
    c.innerHTML=`<h3>${t.title}</h3><div class="body">${t.body}</div>`;
    t.attachments.images.forEach(i=>{
      const img=document.createElement("img");
      img.src=i.data; img.className="img";
      c.appendChild(img);
    });
    t.attachments.videos.forEach(v=>{
      const vid=document.createElement("video");
      vid.src=v.data; vid.controls=true;
      c.appendChild(vid);
    });
    box.appendChild(c);
  });
}

/* =====================
   EVENTS
   ===================== */
document.getElementById("postNews").onclick = async ()=>{
  try{
    const at = await collectAttachments(
      newsImages, newsVideos
    );
    db.news.unshift({
      title: newsTitle.value,
      body: newsBody.value,
      attachments: at
    });
    saveDB(); renderNews();
  }catch(e){ alert(e.message); }
};

document.getElementById("postTopic").onclick = async ()=>{
  try{
    const at = await collectAttachments(
      topicImages, topicVideos
    );
    db.topics.unshift({
      title: topicTitle.value,
      body: topicBody.value,
      attachments: at
    });
    saveDB(); renderTopics();
  }catch(e){ alert(e.message); }
};

/* =====================
   TABS
   ===================== */
document.querySelectorAll(".tab").forEach(t=>{
  t.onclick=()=>{
    document.querySelectorAll(".tab").forEach(x=>x.classList.remove("active"));
    t.classList.add("active");
    document.getElementById("tab_news").classList.toggle("hidden", t.dataset.tab!=="news");
    document.getElementById("tab_board").classList.toggle("hidden", t.dataset.tab!=="board");
  };
});

/* =====================
   INIT
   ===================== */
renderNews();
renderTopics();
</script>
</body>
</html>
